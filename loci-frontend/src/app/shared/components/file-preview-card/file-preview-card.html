<div
  class="border border-neutral-300 rounded-lg p-2 flex items-center gap-2 bg-neutral-50 relative max-w-full"
  role="group"
  [attr.aria-label]="file().filename"
>
  <!-- Remove button -->
  @if (removable()) {
    <!-- Replace app-button with your actual Button component selector -->
    <button
      type="button"
      class="absolute top-1 right-1 bg-neutral-50 rounded-full p-0.5 shadow hover:bg-neutral-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-[var(--color-primary)]"
      (click)="onRemoveClicked()"
      [attr.aria-label]="removeAriaLabel"
    >
      <!-- X icon (lucide) -->
      <!-- Example using lucide; adjust to your actual icon wrapper -->
      <!-- <lucide-icon name="X" class="w-3 h-3" aria-hidden="true"></lucide-icon> -->
      <span class="sr-only">Remove</span>
      <svg
        class="w-3 h-3"
        viewBox="0 0 16 16"
        aria-hidden="true"
        focusable="false"
      >
        <path
          d="M3.5 3.5l9 9m0-9l-9 9"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
        />
      </svg>
    </button>
  }

  <!-- Thumbnail -->
  @if (isImage()) {
    <img
      [ngSrc]="file().url || ''"
      [alt]="altText"
      width="48"
      height="48"
      class="w-12 h-12 rounded object-cover flex-shrink-0 bg-neutral-200"
    />
  } @else {
    <!-- File type icon -->
    <!-- Example with lucide icon; update to your actual icon component -->
    <!--
    <lucide-icon
      [name]="iconConfig().icon"
      [class]="'w-8 h-8 flex-shrink-0 ' + iconConfig().class"
      aria-hidden="true"
    ></lucide-icon>
    -->
    <div
      [class]="'w-8 h-8 flex-shrink-0 rounded flex items-center justify-center bg-white ' + iconConfig().class"
      aria-hidden="true"
    >
      <!-- simple fallback icon -->
      <svg
        class="w-5 h-5"
        viewBox="0 0 20 20"
        fill="none"
        stroke="currentColor"
      >
        <path
          d="M6 2.75A1.75 1.75 0 0 1 7.75 1h4.19c.46 0 .9.18 1.23.51l2.32 2.32c.33.33.51.77.51 1.23v11.19A1.75 1.75 0 0 1 14.25 18h-6.5A1.75 1.75 0 0 1 6 16.25v-13.5Z"
          stroke-width="1.3"
        />
        <path d="M11.5 2.25V5.5h3.25" stroke-width="1.3" />
      </svg>
    </div>
  }

  <!-- File info -->
  <div class="flex flex-col min-w-0">
    <div
      class="text-sm font-medium truncate flex-1 text-neutral-900"
      [title]="file().filename"
    >
      {{ truncatedFilename() }}
    </div>
    <div class="text-xs text-neutral-500">
      {{ file().size }}
    </div>
  </div>
</div>
